(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";function prependAxis(e,t){return e.replace(regex_first_axis,function(e,r,s){return"::"===s.substr(s.length-2)?e:("["===s.charAt(0)&&(t+="*"),r+t+s)})}function selectorStart(e,t){for(var r=0,s=0;t--;)switch(e.charAt(t)){case" ":case escape_parens:s++;break;case"[":case"(":if(r--,0>r)return++t+s;break;case"]":case")":r++;break;case",":case"|":if(0===r)return++t+s;default:s=0}return 0}function isNumeric(e){var t=parseInt(e,10);return!isNaN(t)&&""+t===e}function escapeChar(e,t,r,s){var a=0;return e.replace(new RegExp("[\\"+t+"\\"+r+"]","g"),function(e){return e===t&&a++,e===t?e+repeat(s,a):repeat(s,a--)+e})}function repeat(e,t){t=Number(t);for(var r="";;){if(1&t&&(r+=e),t>>>=1,0>=t)break;e+=e}return r}function css2xpath(e,t){if(t===!0)return e=e.replace(css_pseudo_classes_regex,css_pseudo_classes_callback),e=e.replace(css_ids_classes_regex,css_ids_classes_callback);e=escapeChar(e,"(",")",escape_parens);var r=[];for(e=e.replace(regex_string_literal,function(e,t){if("="===t.charAt(0)){if(t=t.substr(1).trim(),isNumeric(t))return e}else t=t.substr(1,t.length-2);return repeat(escape_literal,r.push(t))}),e=e.replace(css_combinators_regex,css_combinators_callback),e=e.replace(css_attributes_regex,css_attributes_callback);;){var s=e.search(regex_css_wrap_pseudo);if(-1===s)break;s=e.indexOf(":",s);var a=selectorStart(e,s);e=e.substr(0,a)+"("+e.substring(a,s)+")"+e.substr(s)}return e=e.replace(css_pseudo_classes_regex,css_pseudo_classes_callback),e=e.replace(css_ids_classes_regex,css_ids_classes_callback),e=e.replace(regex_escaped_literal,function(e,t){var s=r[t.length-1];return'"'+s+'"'}),e=e.replace(regex_specal_chars,""),e=e.replace(regex_filter_prefix,"$1*["),e=e.replace(regex_attr_prefix,"$1/@"),e=prependAxis(e,".//")}var xpath_to_lower=function(e){return"translate("+(e||"normalize-space()")+", 'ABCDEFGHJIKLMNOPQRSTUVWXYZ', 'abcdefghjiklmnopqrstuvwxyz')"},xpath_ends_with=function(e,t){return"substring("+e+",string-length("+e+")-string-length("+t+")+1)="+t},xpath_url=function(e){return"substring-before(concat(substring-after("+(e||xpath_url_attrs)+',"://"),"?"),"?")'},xpath_url_path=function(e){return"substring-after("+(e||xpath_url_attrs)+',"/")'},xpath_url_domain=function(e){return"substring-before(concat(substring-after("+(e||xpath_url_attrs)+',"://"),"/"),"/")'},xpath_url_attrs="@href|@src",xpath_lower_case=xpath_to_lower(),xpath_ns_uri="ancestor-or-self::*[last()]/@url",xpath_ns_path=xpath_url_path(xpath_url(xpath_ns_uri)),xpath_has_protocal="(starts-with("+xpath_url_attrs+',"http://") or starts-with('+xpath_url_attrs+',"https://"))',xpath_is_internal="starts-with("+xpath_url()+","+xpath_url_domain(xpath_ns_uri)+") or "+xpath_ends_with(xpath_url_domain(),xpath_url_domain(xpath_ns_uri)),xpath_is_local="("+xpath_has_protocal+" and starts-with("+xpath_url()+","+xpath_url(xpath_ns_uri)+"))",xpath_is_path="starts-with("+xpath_url_attrs+',"/")',xpath_is_local_path="starts-with("+xpath_url_path()+","+xpath_ns_path+")",xpath_normalize_space="normalize-space()",xpath_internal="[not("+xpath_has_protocal+") or "+xpath_is_internal+"]",xpath_external="["+xpath_has_protocal+" and not("+xpath_is_internal+")]",escape_literal=String.fromCharCode(30),escape_parens=String.fromCharCode(31),regex_string_literal=/("[^"\x1E]*"|'[^'\x1E]*'|=\s*[^\s\]\'\"]+)/g,regex_escaped_literal=/['"]?(\x1E+)['"]?/g,regex_css_wrap_pseudo=/(\x1F\)|[^\)])\:(first|limit|last|gt|lt|eq|nth)([^\-]|$)/,regex_specal_chars=/[\x1C-\x1F]+/g,regex_first_axis=/^([\s\(\x1F]*)(\.?[^\.\/\(]{1,2}[a-z]*:*)/,regex_filter_prefix=/(^|\/|\:)\[/g,regex_attr_prefix=/([^\(\[\/\|\s\x1F])\@/g,regex_nth_equation=/^([-0-9]*)n.*?([0-9]*)$/,css_combinators_regex=/\s*(!?[+>~,^ ])\s*(\.?\/+|[a-z\-]+::)?([a-z\-]+\()?((and\s*|or\s*|mod\s*)?[^+>~,\s'"\]\|\*\^\$\!\<\=\x1C-\x1F]+)?/g,css_combinators_callback=function(e,t,r,s,a,n,c,i){if(" "===t&&void 0!==n)return e;var o="";if(void 0===r){if(void 0!==s&&"node("!==s&&"text("!==s&&"comment("!==s)return;if(void 0===a&&(a=s),isNumeric(a))return e;var l=i.charAt(c-1);0!==l.length&&"("!==l&&"|"!==l&&":"!==l||(o=".")}if(void 0===a){if(c+e.length!==i.length)return e;a="*"}switch(t){case" ":return"//"+a;case">":return"/"+a;case"+":return o+"/following-sibling::*[1]/self::"+a;case"~":return o+"/following-sibling::"+a;case",":return r=".//","|"+r+a;case"^":return"/child::*[1]/self::"+a;case"!^":return"/child::*[last()]/self::"+a;case"! ":return"/ancestor-or-self::"+a;case"!>":return"/parent::"+a;case"!+":return"/preceding-sibling::*[1]/self::"+a;case"!~":return"/preceding-sibling::"+a}},css_attributes_regex=/\[([^\@\|\*\=\^\~\$\!\(\/\s\x1C-\x1F]+)\s*(([\|\*\~\^\$\!]?)=?\s*(\x1E+))?\]/g,css_attributes_callback=function(e,t,r,s,a,n,c){var i="";c.charAt(n-1);switch(s){case"!":return i+"[not(@"+t+") or @"+t+'!="'+a+'"]';case"$":return i+"[substring(@"+t+",string-length(@"+t+')-(string-length("'+a+'")-1))="'+a+'"]';case"^":return i+"[starts-with(@"+t+',"'+a+'")]';case"~":return i+'[contains(concat(" ",normalize-space(@'+t+')," "),concat(" ","'+a+'"," "))]';case"*":return i+"[contains(@"+t+',"'+a+'")]';case"|":return i+"[@"+t+'="'+a+'" or starts-with(@'+t+',concat("'+a+'","-"))]';default:return void 0===r?"("===t.charAt(t.length-1)||-1!==t.search(/^[0-9]+$/)||-1!==t.indexOf(":")?e:i+"[@"+t+"]":i+"[@"+t+'="'+a+'"]'}},css_pseudo_classes_regex=/:([a-z\-]+)(\((\x1F+)(([^\x1F]+(\3\x1F+)?)*)(\3\)))?/g,css_pseudo_classes_callback=function(e,t,r,s,a,n,c,i,o,l){if(":"===l.charAt(o-1)&&":"!==l.charAt(o-2))return e;switch("odd"!==t&&"even"!==t||(a=t,t="nth-of-type"),t){case"after":return"[count("+css2xpath("preceding::"+a,!0)+") > 0]";case"after-sibling":return"[count("+css2xpath("preceding-sibling::"+a,!0)+") > 0]";case"before":return"[count("+css2xpath("following::"+a,!0)+") > 0]";case"before-sibling":return"[count("+css2xpath("following-sibling::"+a,!0)+") > 0]";case"checked":return"[@selected or @checked]";case"contains":return"[contains("+xpath_normalize_space+","+a+")]";case"icontains":return"[contains("+xpath_lower_case+","+xpath_to_lower(a)+")]";case"empty":return"[not(*) and not(normalize-space())]";case"enabled":case"disabled":return"[@"+t+"]";case"first-child":return"[not(preceding-sibling::*)]";case"first":case"limit":case"first-of-type":return void 0!==a?"[position()<="+a+"]":"[1]";case"gt":return"[position()>"+(parseInt(a,10)+1)+"]";case"lt":return"[position()<"+(parseInt(a,10)+1)+"]";case"last-child":return"[not(following-sibling::*)]";case"only-child":return"[not(preceding-sibling::*) and not(following-sibling::*)]";case"only-of-type":return"[not(preceding-sibling::*[name()=name(self::node())]) and not(following-sibling::*[name()=name(self::node())])]";case"nth-child":if(isNumeric(a))return"[(count(preceding-sibling::*)+1) = "+a+"]";switch(a){case"even":return"[(count(preceding-sibling::*)+1) mod 2=0]";case"odd":return"[(count(preceding-sibling::*)+1) mod 2=1]";default:var u=(a||"0").replace(regex_nth_equation,"$1+$2").split("+");return u[0]=u[0]||"1",u[1]=u[1]||"0","[(count(preceding-sibling::*)+1)>="+u[1]+" and ((count(preceding-sibling::*)+1)-"+u[1]+") mod "+u[0]+"=0]"}case"nth-of-type":if(isNumeric(a))return"["+a+"]";switch(a){case"odd":return"[position() mod 2=1]";case"even":return"[position() mod 2=0 and position()>=0]";default:var u=(a||"0").replace(regex_nth_equation,"$1+$2").split("+");return u[0]=u[0]||"1",u[1]=u[1]||"0","[position()>="+u[1]+" and (position()-"+u[1]+") mod "+u[0]+"=0]"}case"eq":case"nth":return"["+(parseInt(a,10)+1)+"]";case"text":return'[@type="text"]';case"istarts-with":return"[starts-with("+xpath_lower_case+","+xpath_to_lower(a)+")]";case"starts-with":return"[starts-with("+xpath_normalize_space+","+a+")]";case"iends-with":return"["+xpath_ends_with(xpath_lower_case,xpath_to_lower(a))+"]";case"ends-with":return"["+xpath_ends_with(xpath_normalize_space,a)+"]";case"has":var _=prependAxis(css2xpath(a,!0),".//");return"[count("+_+") > 0]";case"has-sibling":var _=css2xpath("preceding-sibling::"+a,!0);return"[count("+_+") > 0 or count(following-sibling::"+_.substr(19)+") > 0]";case"has-parent":return"[count("+css2xpath("parent::"+a,!0)+") > 0]";case"has-ancestor":return"[count("+css2xpath("ancestor::"+a,!0)+") > 0]";case"last":case"last-of-type":return void 0!==a?"[position()>last()-"+a+"]":"[last()]";case"selected":return'[local-name()="option" and @selected]';case"skip":case"skip-first":return"[position()>"+a+"]";case"skip-last":return void 0!==a?"[last()-position()>="+a+"]":"[position()<last()]";case"root":return"/ancestor::[last()]";case"range":var p=a.split(",");return"["+p[0]+"<=position() and position()<="+p[1]+"]";case"input":return'[local-name()="input" or local-name()="button" or local-name()="select" or local-name()="textarea"]';case"internal":return xpath_internal;case"external":return xpath_external;case"http":case"https":case"mailto":case"javascript":return'[starts-with(@href,concat("'+t+'",":"))]';case"domain":return"[(string-length("+xpath_url_domain()+")=0 and contains("+xpath_url_domain(xpath_ns_uri)+","+a+")) or contains("+xpath_url_domain()+","+a+")]";case"path":return"[starts-with("+xpath_url_path()+',substring-after("'+a+'","/"))]';case"not":var _=css2xpath(a,!0);return"["===_.charAt(0)&&(_="self::node()"+_),"[not("+_+")]";case"target":return'[starts-with(@href, "#")]';case"root":return"ancestor-or-self::*[last()]";case"lang":return'[@lang="'+a+'"]';case"read-only":case"read-write":return"[@"+t.replace("-","")+"]";case"valid":case"required":case"in-range":case"out-of-range":return"[@"+t+"]";default:return str}},css_ids_classes_regex=/(#|\.)([^\#\@\.\/\(\[\)\]\|\:\s\+\>\<\'\"\x1D-\x1F]+)/g,css_ids_classes_callback=function(e,t,r,s,a){var n="";return"#"===t?n+'[@id="'+r+'"]':n+'[contains(concat(" ",normalize-space(@class)," ")," '+r+' ")]'};module.exports=css2xpath;

},{}]},{},[1]);
